$(document).ready(function(){var t=$(".hide_vote_socket").data("host"),e=$(".hide_vote_socket").data("port"),o=""==e?t:t+":"+e,a=io.connect(o);"0"==$(".manage-poll-count-participant").text()&&$(".delete-all-participants").hide(),a.on("votes",function(t){var e=$(".hide-vote").data("pollId"),o=$.parseJSON(t);o.success&&o.poll_id==e&&($(".count-participant").html(o.count_participant),jQuery.each(o.result,function(t,e){$("#id1"+e.option_id).html(e.count_vote),$("#id2"+e.option_id).html(e.count_vote),$(".result-vote-poll").empty(),$(".result-vote-poll").append(o.html_result_vote),$(".model-show-details").empty(),$(".model-show-details").append(o.html)}),"undefined"!=typeof o.horizontalOption&&($(".li-parent-vote").not(".parent-vote-new-option").remove(),$(".horizontal-overflow").prepend(o.horizontalOption),$('[data-toggle="tooltip"]').tooltip()),"undefined"!=typeof o.verticalOption&&$(".vertical-overflow").html(o.verticalOption),""==$(".bar-pie-chart").html()&&$(".bar-pie-chart").html(o.html_pie_bar_chart),"0"==$(".manage-poll-count-participant").text()&&($(".li-result-table").removeClass("hide-result-li"),$(".pie_bar_chart_manage").append(o.html_pie_bar_manage_chart),$(".manage-poll-count-participant").text("1")),$(".delete-all-participants-soket").css("display","block"),$(".div-delete-participant").removeClass("col-md-activity-jp"),$(".btn-duplicate").css("display","none"),$(".menu-add-soket").css("display","block"),$(".show-piechart").empty(),$(".show-piechart").append(o.htmlPieChart),$(".show-barchart").empty(),$(".show-barchart").append(o.htmlBarChart))}),a.on("comment",function(t){var e=$(".hide-vote").data("pollId"),o=$(".hide-vote").data("isOwnerPoll");if($.parseJSON(t).success&&$.parseJSON(t).poll_id==e){"1"==o?$(".comments").append($.parseJSON(t).htmlOwner):$(".comments").append($.parseJSON(t).htmlNotOwner);var a=$(".comment-count").html();$(".comment-count").html(parseInt(a)+1),$("#content"+e).val("")}}),a.on("closePoll",function(t){var e=$(".hide-vote-details").data("pollId");$.parseJSON(t).success&&$.parseJSON(t).poll_id==e&&(window.location.href=$.parseJSON(t).link_user)}),a.on("reopenPoll",function(t){var e=$(".hide-poll-closed").data("pollId");$.parseJSON(t).success&&$.parseJSON(t).poll_id==e&&(window.location.href=$.parseJSON(t).link_user)}),a.on("deleteParticipant",function(t){var e=$(".hide-vote").data("pollId");$.parseJSON(t).poll_id==e&&($(".count-participant").html("0"),$(".model-show-details").empty(),$(".show-piechart").empty(),$(".show-barchart").empty(),$(".bar-pie-chart").empty(),$(".show-details_default").addClass("in active"),$(".model-show-details").append($.parseJSON(t).modal_details_empty),jQuery.each($.parseJSON(t).result,function(t,e){$("#id1"+e.option_id).html("0"),$("#id2"+e.option_id).html("0"),$("#id3"+e.option_id).html("0")}))}),a.on("editPoll",function(t){var e=$(".hide-vote-details").data("pollId");$.parseJSON(t).success&&$.parseJSON(t).poll_id==e&&(window.location.href=$.parseJSON(t).link_user)})});