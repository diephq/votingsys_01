{"version":3,"sources":["vote.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"vote.js","sourcesContent":["$(document).ready(function(){\n\n    $.ajaxSetup({\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n    $('.loader').hide();\n\n    $.extend({\n        xResponse: function(url, data, messageError) {\n            // local var\n            var theResponse = null;\n            // jQuery ajax\n            $.ajax({\n                url: url,\n                type: 'POST',\n                data: data,\n                dataType: \"json\",\n                async: false,\n\n                beforeSend: function () {\n                    $('.loader').show();\n                },\n\n                success: function(respText) {\n                    theResponse = respText.status;\n                },\n\n                complete: function () {\n                    $('.loader').hide();\n                },\n\n                error: function () {\n                    showMessage(messageError);\n                    $('.loader').hide();\n                }\n            });\n            // Return the response text\n            return theResponse;\n        }\n    });\n\n    $('.btn-vote').prop('disabled', true);\n\n    $('.btn-vote').on('click', function() {\n        var testEmail = /^[A-Z0-9._%+-]+@([A-Z0-9-]+\\.)+[A-Z]{2,4}$/i;\n        divChangeAmount = $(this).parent();\n        var url = divChangeAmount.data('url');\n        var idPoll = divChangeAmount.data('idPoll');\n        var urlCheckExistEmail = divChangeAmount.data('urlCheckExistEmail');\n        var isRequiredEmail = divChangeAmount.data('isRequiredEmail');\n        var isRequiredName = divChangeAmount.data('isRequiredName');\n        var isRequiredNameAndEmail = divChangeAmount.data('isRequiredNameAndEmail');\n        var isNotTheSameEmail = divChangeAmount.data('isNotSameEmail');\n        var nameVote = $('.nameVote').val();\n        var emailVote = $('.emailVote').val();\n        var message = '';\n        var data = divChangeAmount.data();\n\n        if (isRequiredEmail == 1) {\n            if (emailVote.trim() != '') {\n                if (testEmail.test(emailVote)) {\n                    if (nameVote.trim().length >= 100) {\n                        divChangeAmount = $(this).parent();\n                        message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                            + ' ' + divChangeAmount.data('voteLimitName');\n                        $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                        $('.nameVote').addClass('error');\n\n                        if ($('.emailVote').hasClass('error')) {\n                            $('.emailVote').removeClass('error');\n                        }\n                    } else {\n                        // Check email exist if propety require email\n                        if (isNotTheSameEmail) {\n                            var status = $.xResponse(urlCheckExistEmail, {idPoll: idPoll, emailVote: emailVote});\n\n                            if (status) {\n                                showMessage(data.messageEmailExists, data.messageErrorOccurs);\n\n                                return;\n                            }\n                        }\n\n                        this.disabled = true;\n                        removeClassError();\n                        $('.message-validation').removeClass('alert alert-warning alert-poll-set-ip').html('');\n                        $('#form-vote').submit();\n                        $('.loader').show();\n                    }\n                } else {\n                    divChangeAmount = $(this).parent();\n                    message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                        + ' ' +  divChangeAmount.data('messageValidateEmail');\n                    $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                    $('.emailVote').addClass('error');\n\n                    if ($('.nameVote').hasClass('error')) {\n                        $('.nameVote').removeClass('error');\n                    }\n                }\n            } else {\n                divChangeAmount = $(this).parent();\n                message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                    + ' ' + divChangeAmount.data('messageRequiredEmail');\n                $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                $('.emailVote').addClass('error');\n\n                if ($('.nameVote').hasClass('error')) {\n                    $('.nameVote').removeClass('error');\n                }\n            }\n        } else if (isRequiredName == 1) {\n            if (nameVote.trim() != '') {\n                if (nameVote.trim().length < 100) {\n                    if (emailVote.trim() != '') {\n                        if (testEmail.test(emailVote)) {\n                            this.disabled = true;\n                            removeClassError();\n                            $('.message-validation').removeClass('alert alert-warning alert-poll-set-ip').html('');\n                            $('#form-vote').submit();\n                            $('.loader').show();\n                        } else {\n                            divChangeAmount = $(this).parent();\n                            message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                                + ' ' +  divChangeAmount.data('messageValidateEmail');\n                            $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                            $('.emailVote').addClass('error');\n\n                            if ($('.nameVote').hasClass('error')) {\n                                $('.nameVote').removeClass('error');\n                            }\n                        }\n                    } else {\n                        this.disabled = true;\n                        removeClassError();\n                        $('.message-validation').removeClass('alert alert-warning alert-poll-set-ip').html('');\n                        $('#form-vote').submit();\n                        $('.loader').show();\n                    }\n                } else {\n                    divChangeAmount = $(this).parent();\n                    message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                        + ' ' + divChangeAmount.data('voteLimitName');\n                    $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                    $('.nameVote').addClass('error');\n\n                    if ($('.emailVote').hasClass('error')) {\n                        $('.emailVote').removeClass('error');\n                    }\n                }\n            } else {\n                divChangeAmount = $(this).parent();\n                message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                    + ' ' + divChangeAmount.data('messageRequiredName');\n                $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                $('.nameVote').addClass('error');\n\n                if ($('.emailVote').hasClass('error')) {\n                    $('.emailVote').removeClass('error');\n                }\n            }\n        } else if (isRequiredNameAndEmail == 1) {\n            if (nameVote.trim() != '' && nameVote.trim().length < 100) {\n                if (emailVote.trim() == '') {\n                    divChangeAmount = $(this).parent();\n                    message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                        + ' ' + divChangeAmount.data('messageRequiredEmail');\n                    $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                    $('.emailVote').addClass('error');\n\n                    if ($('.nameVote').hasClass('error')) {\n                        $('.nameVote').removeClass('error');\n                    }\n                } else {\n                    if (testEmail.test(emailVote)) {\n                        // Check email exist if propety require email\n                        if (isNotTheSameEmail) {\n                            var status = $.xResponse(urlCheckExistEmail, {idPoll: idPoll, emailVote: emailVote});\n\n                            if (status) {\n                                showMessage(data.messageEmailExists, data.messageErrorOccurs);\n\n                                return;\n                            }\n                        }\n\n                        this.disabled = true;\n                        removeClassError();\n                        $('.message-validation').removeClass('alert alert-warning alert-poll-set-ip').html('');\n                        $('#form-vote').submit();\n                        $('.loader').show();\n                    } else {\n                        divChangeAmount = $(this).parent();\n                        message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                            + ' ' +  divChangeAmount.data('messageValidateEmail');\n                        $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                        $('.emailVote').addClass('error');\n\n                        if ($('.nameVote').hasClass('error')) {\n                            $('.nameVote').removeClass('error');\n                        }\n                    }\n                }\n            } else {\n                if (nameVote.trim() == '') {\n                    if (emailVote.trim() == '') {\n                        divChangeAmount = $(this).parent();\n                        message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                            + ' ' + divChangeAmount.data('messageRequiredNameAndEmail');\n                        $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                        $('.nameVote').addClass('error');\n                        $('.emailVote').addClass('error');\n                    } else {\n                        divChangeAmount = $(this).parent();\n                        message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                            + ' ' + divChangeAmount.data('messageRequiredName');\n                        $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                        $('.nameVote').addClass('error');\n\n                        if ($('.emailVote').hasClass('error')) {\n                            $('.emailVote').removeClass('error');\n                        }\n                    }\n                } else if (nameVote.trim().length >= 100) {\n                    divChangeAmount = $(this).parent();\n                    message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                        + ' ' + divChangeAmount.data('voteLimitName');\n                    $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                    $('.nameVote').addClass('error');\n\n                    if ($('.emailVote').hasClass('error')) {\n                        $('.emailVote').removeClass('error');\n                    }\n                }\n            }\n        } else {\n            var isPassValidate = false;\n\n            if (emailVote.trim() != '') {\n                if (testEmail.test(emailVote)) {\n                    isPassValidate = true;\n                } else {\n                    divChangeAmount = $(this).parent();\n                    message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                        + ' ' +  divChangeAmount.data('messageValidateEmail');\n                    $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                    $('.emailVote').addClass('error');\n\n                    if ($('.nameVote').hasClass('error')) {\n                        $('.nameVote').removeClass('error');\n                    }\n                }\n            } else {\n                isPassValidate = true;\n            }\n\n            if (nameVote.trim().length >= 100) {\n                divChangeAmount = $(this).parent();\n                message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n                    + ' ' + divChangeAmount.data('voteLimitName');\n                $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n                $('.nameVote').addClass('error');\n\n                if ($('.emailVote').hasClass('error')) {\n                    $('.emailVote').removeClass('error');\n                }\n                isPassValidate = false;\n            }\n\n            if (isPassValidate) {\n                // Check email exist if propety require email\n                if (isNotTheSameEmail) {\n                    var status = $.xResponse(urlCheckExistEmail, {idPoll: idPoll, emailVote: emailVote});\n\n                    if (status) {\n                        showMessage(data.messageEmailExists, data.messageErrorOccurs);\n\n                        return;\n                    }\n                }\n                this.disabled = true;\n                removeClassError();\n                $('.message-validation').removeClass('alert alert-warning alert-poll-set-ip').html('');\n                $('#form-vote').submit();\n                $('.loader').show();\n            }\n        }\n    });\n\n    function removeClassError()\n    {\n        if ($('.emailVote').hasClass('error')) {\n            $('.emailVote').removeClass('error');\n        }\n\n        if ($('.nameVote').hasClass('error')) {\n            $('.nameVote').removeClass('error');\n        }\n    }\n\n    function showMessage(message)\n    {\n        var message = \"<span class='glyphicon glyphicon-warning-sign'></span>\"\n            + ' ' +  message;\n        $('.message-validation').addClass('alert alert-warning alert-poll-set-ip').html(message);\n        $('.emailVote').addClass('error');\n\n        if ($('.nameVote').hasClass('error')) {\n            $('.nameVote').removeClass('error');\n        }\n    }\n\n    $('.btn-edit-submit').on('click', function () {\n        var isEmpty = false;\n        $('input[id^=optionText]').each(function () {\n            if ($(this).val() == '') {\n                return isEmpty = true;\n            }\n        });\n\n        if (isEmpty) {\n            var messageEmpty = $('.vote-style').data('option').message.option_required;\n            $('.btn-edit-submit').prop('disabled', true);\n            $('.error_option').addClass('has-error').html('<span id=\"title-error\" class=\"help-block\">' + messageEmpty + '</span>');\n\n            return;\n        }\n\n        $('.btn-edit-submit').prop('disabled', false);\n        $('#edit-voted-content').submit();\n    });\n\n    $('#message-flash').fadeIn().delay(3000).fadeOut();\n\n    $('#frame-upload-image-edit').on('hidden.bs.modal', function () {\n        $('body').attr('class', 'modal-open');\n    });\n\n    $('.edit-each-option').on('click', function () {\n        var dataClient = $(this).closest('.vote-style').data('option');\n        var dataViewOption = dataClient.view.option;\n        var data = {optionText: {}};\n\n        var elContentVote = $('.content-option-vote').length\n            ? $('.content-option-vote')\n            : $('.content-option-not-image');\n\n        elContentVote.each(function (index) {\n            var idOption = $('input[name=\"option[]\"]').eq(index).val();\n            data.optionText[idOption] = $(this).text();\n        });\n\n        $('.poll-option').html('')\n        createOption(dataViewOption, '', data);\n\n        var frnCheckTheSame = ['checkOptionSame(\\'', dataClient.message.option_duplicate, '\\')'].join('');\n        $('#frame-edit-poll').find('.btn-remove-option').remove();\n        $('#frame-edit-poll').find('input[name^=optionText]')\n            .removeAttr('onfocus onclick')\n            .attr({\n                onblur: frnCheckTheSame,\n                onkeyup: frnCheckTheSame\n            });\n\n        pickDateOption();\n\n        $('.li-parent-vote').find('.image-option-vote').each(function (index) {\n            var srcImage = $(this).prop('src');\n            if (srcImage.indexOf('default-thumb.gif') == -1 ) {\n                $('#frame-edit-poll').find('.render-img').eq(index).attr('src', srcImage);\n                $('#frame-edit-poll').find('.box-media-image').eq(index).css('display', 'inline-block');\n            }\n        });\n\n        $('#frame-edit-poll').modal('show');\n    });\n\n});\n\nvar jqAddNewImageOption11 = new jqAddImageOption({\n    wrapperPoll: '.poll-option',\n    parentOption: '.form-group',\n    thumbImageOption: '.render-img',\n    btnChooseImage: '.upload-photo',\n    frImage: \"#frame-upload-image-edit\",\n    frUploadFile: '.photo-tb-upload-edit',\n    frPreImage: '.img-pre-option-edit',\n    frAddImgLink: '.add-image-by-link-edit',\n    frInputText: '.photo-tb-url-txt-edit',\n    frDelPhoto: '.photo-tb-del-edit',\n    frConfirmYes: '.btn-yes-edit',\n    frInputFileTemp: '.fileImgTempEdit',\n    frContentError : '.error-win-img-edit',\n    messages: 'div[data-option]',\n});\n\n/**\n * Add New Option\n */\nvar addNewOption = function () {\n    this.init = function() {\n        this.cacheDom();\n        this.bindEvent();\n    }\n\n    this.cacheDom = function () {\n        // DOM to process image of option\n        this.$preview = $('.render-img');\n        this.$btnFileImg = $('.btn-file-img');\n        this.$deleteImg = $('.deleteImg');\n        this.$parentThumb = $('.box-media-image');\n\n        // DOM to process option text\n        this.$newOption = $('.new-option');\n        this.$liParent = $('.parent-vote');\n        this.$inputTextOption = $('.text-new-option');\n        this.$allOption = $('input[id^=horizontal]');\n\n        this.$contentOption = $('.option-name').find('span');\n\n        // DOM button to vote\n        this.$btnVote = $('.btn-vote');\n        this.$boxVote = $('#voting_wizard');\n\n        // DOM warpper vote\n        this.$voteImageWrapper = $('.vote-preview-wrapper');\n\n        // DOM to scrollTop div\n        this.$horizontalWrapper = $('.horizontal-overflow');\n\n        // Check option that choose radio or checkbox\n        this.isRadio = this.$newOption.is(':radio');\n\n        // DOM to show message validation\n        this.$showError = $('#error_option');\n        this.messageValidate = this.$showError.data('message');\n\n        // DOM of datepicker\n        this.$datePicker = $('.date-time-picker');\n        this.$pickDate = $('.pick-date');\n    }\n\n    this.bindEvent = function () {\n        this.$showError.hide();\n        this.$preview.on('load', this.loadPreImage.bind(this));\n        this.$inputTextOption.on('input', this.addText.bind(this));\n        this.$boxVote.on('click', '.new-option', this.chooseOption.bind(this));\n        this.$liParent.on('click', this.chooseOptionWithLi.bind(this));\n        this.$pickDate.on('click', this.getTextDatePicker.bind(this));\n        this.$datePicker.on('dp.hide', this.addTextDate.bind(this));\n    }\n\n    this.loadPreImage = function () {\n        this.$deleteImg.show();\n        this.$voteImageWrapper.css('border', '1px solid #ccc');\n        this.$voteImageWrapper.css('border-top', 'none');\n    }\n\n    this.getTextDatePicker = function () {\n        this.$pickDate.data('isHasDate', true);\n        var textInput = typeof this.addText() === 'undefined' ? '' : this.addText().trim();\n        if (this._isValidDate(textInput)) {\n            textInput = '';\n        }\n\n        this.$datePicker.data('preText', textInput);\n        this.$datePicker.datetimepicker({\n            showClose: true,\n            icons: {close: 'glyphicon glyphicon-ok'}\n        }).data('DateTimePicker').show();\n    }\n\n    this.addTextDate = function (e) {\n        var dateChoosed = moment(e.date).format('MM/DD/YYYY h:mm A');\n        var preText = this.$datePicker.data('preText');\n        var fullText = (preText + ' ' + dateChoosed).trim();\n\n        this.$inputTextOption.val(fullText);\n\n        // Destroy event datepicker that convert text input\n        this.$datePicker.data('DateTimePicker').hide().destroy();\n        this.$pickDate.data('isHasDate', false);\n    }\n\n    this.readURL = function () {\n        var input = this.$inputFileImg[0];\n        var isImage = this._checkExtensionImage(input);\n        var lengthInput = this.$inputTextOption.val();\n\n        if (!this._validateDuplicate(lengthInput)) {\n            if (isImage) {\n                this.$showError.hide();\n\n                if (input.files && input.files[0]) {\n                    var reader = new FileReader();\n                    reader.onload = this._renderImage.bind(this);\n\n                    reader.readAsDataURL(input.files[0]);\n                }\n            } else {\n                this.$inputFileImg.val('');\n                this._displayError(this.messageValidate.image);\n            }\n        }\n    }\n\n    this.deletePhoto = function () {\n        this.$preview.attr('src', '').hide();\n        this.$parentThumb.hide();\n        this.$deleteImg.hide();\n        this.$voteImageWrapper.css('border', 'none');\n        if (this.$inputTextOption.val() == '') {\n            this._notViewSubmit();\n        }\n    }\n\n    this.addText = function () {\n        var lengthInput = this.$inputTextOption.val().trim();\n\n        if (!this._validateDuplicate(lengthInput)) {\n            this.$showError.hide();\n            if (this.isRadio) {\n                this.$allOption.prop('checked', false);\n            }\n\n            if (lengthInput == '' && !this.$pickDate.data('isHasDate')) {\n                this._notViewSubmit();\n\n                return;\n            }\n\n            this._viewSubmit();\n\n            return lengthInput;\n        } else {\n            this._notViewSubmit();\n            this._displayError(this.messageValidate.option_duplicate);\n        }\n    }\n\n    this.chooseOption = function (e) {\n        var lengthInput = this.$inputTextOption.val();\n\n        if (lengthInput == '') {\n            if (this.isRadio) {\n                this.$btnVote.prop('disabled', true);\n                this.$newOption.prop('checked', false);\n            }\n\n            this.deletePhoto();\n        }\n\n        if (this.isRadio) {\n            this.$allOption.prop('checked', false);\n        } else {\n            //is checkbox\n            if (!this.$newOption.prop('checked') && !this.$allOption.is(':checked')) {\n                this.$btnVote.prop('disabled', true);\n\n                return;\n            }\n\n            this.$btnVote.prop('disabled', false);\n        }\n    }\n\n    this.chooseOptionWithLi = function () {\n        if (this.isRadio) {\n            this.$newOption.prop('checked', false);\n            this.$inputTextOption.val('')\n            this.deletePhoto();\n        }\n\n        this.$btnVote.prop('disabled', !(this.$allOption.is(':checked')));\n        if (this.$newOption.is(':checked')) {\n            this.$btnVote.prop('disabled', false);\n        }\n    }\n\n    this._viewSubmit = function () {\n        this.$newOption.prop('checked', true);\n        this.$btnVote.prop('disabled', false);\n    }\n\n    this._notViewSubmit = function () {\n        if (!this.$allOption.is(':checked')) {\n            this.$btnVote.prop('disabled', true);\n        }\n\n        this.$newOption.prop('checked', false);\n    }\n\n    this._renderImage = function (e) {\n        if (this.isRadio) {\n            this.$allOption.prop('checked', false);\n        }\n\n        this.$preview.attr('src', e.target.result).show();\n        this.$deleteImg.show();\n        this.$voteImageWrapper.css('border', '1px solid #ccc');\n        this.$voteImageWrapper.css('border-top', 'none');\n        this._viewSubmit();\n        this._toScrollLast();\n    }\n\n    this._checkExtensionImage = function (input) {\n        var fileUploadPath = input.value;\n        var extension = fileUploadPath.substring(fileUploadPath.lastIndexOf('.') + 1).toLowerCase();\n        var ruleExtension = ['gif', 'png', 'bmp', 'jpeg', 'jpg'];\n\n        if (ruleExtension.indexOf(extension) > -1) {\n            return true;\n        }\n\n        return false;\n    }\n\n    this._validateDuplicate = function (text) {\n        var isDuplicate = false;\n        this.$contentOption.each(function () {\n            if (text == $(this).text()) {\n                return isDuplicate = true;\n            }\n        });\n\n        return isDuplicate;\n    }\n\n    this._toScrollLast = function () {\n        var scrollHeight = $('.horizontal-overflow').prop(\"scrollHeight\");\n        if (scrollHeight > 400) {\n            this.$horizontalWrapper.animate({\n                    scrollTop: scrollHeight\n            }, 1000);\n        }\n    }\n\n    this._displayError = function (message) {\n        this.$showError.find('.help-block').text(message);\n        this.$showError.show();\n        this._toScrollLast();\n    }\n\n    this._isValidDate = function (dateString) {\n        var regEx = /^\\d{2}\\/\\d{2}\\/\\d{4}\\s+[\\d]+:\\d{2}\\s+(AM|PM)$/;\n        return dateString.match(regEx) != null;\n    }\n}\n\n/**\n * Init plugin add image for option\n */\nvar jqAddNewImageOption = new jqAddImageOption({\n    wrapperPoll: '.horizontal-overflow',\n    btnChooseImage: '.upload-photo',\n    parentOption: '.parent-vote-new-option',\n    messages: 'div[data-message]',\n    frImage: \"#frame-upload-image\",\n    frUploadFile: '.photo-tb-upload',\n    frPreImage: '.img-pre-option',\n    frAddImgLink: '.add-image-by-link',\n    frInputText: '.photo-tb-url-txt',\n    frDelPhoto: '.photo-tb-del',\n    frConfirmYes: '.btn-yes',\n    frInputFileTemp: '.fileImgTemp',\n    frContentError : '.error-win-img',\n    messages: 'div[data-option]',\n    horizontalWrapper: '.horizontal-overflow',\n});\n\nvar addOption = new addNewOption();\naddOption.init();\n"]}